
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Libre+Baskerville:ital,wght@0,400;0,700;1,400&display=swap"
    rel="stylesheet">
  <title>Remove &lt;p\&gt; tags surrounding &lt;img\&gt; tags generated by parsing markdown with Showdown</title>
  <link rel="stylesheet" href="/css/parsed.style.css">
  <link rel="stylesheet" href="/css/prism.css">

</head>

<body>
  <div class="post">
    <nav>
      <a href="/">&#8592; Home</a>
    </nav>
    <article class="text"><h2>Remove &lt;p&gt; tags surrounding &lt;img&gt; tags generated by parsing markdown with Showdown</h2>
<p>When Showdown makes image tags from your markdown, it wraps them in a paragraph tag.</p>
<p>To remove these non-essential p tags, which in my case made images a pain to style, define a new extension whereever your main converter is defined.</p>
<pre class="language-js"><code class="language-js">showdown<span class="token punctuation">.</span><span class="token function">extension</span><span class="token punctuation">(</span><span class="token string">"remove-p-from-img"</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">return</span> <span class="token punctuation">[</span><br>    <span class="token punctuation">{</span><br>      type<span class="token operator">:</span> <span class="token string">"output"</span><span class="token punctuation">,</span><br>      <span class="token function-variable function">filter</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">text</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        text <span class="token operator">=</span> text<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><br>          <span class="token comment">// match all &lt;p>'s before and after an &lt;img> tag</span><br>          <span class="token operator">/</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>\<span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">?p[^>]*>)(?=&lt;img.+>)|(&lt;\/?p[^>]*>)(?&lt;=&lt;img.+>)</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span><br>          <span class="token string">""</span><br>        <span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>        <span class="token keyword">return</span> text<span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><span class="token punctuation">,</span><br>    <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token punctuation">]</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">const</span> converter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">showdown<span class="token punctuation">.</span>Converter</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>  extensions<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"remove-p-from-img"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>See the regular expression <a href="https://regexr.com/62bhq">explained more clearly at RegExr</a></p>
</article>
  </div>
  <script src="./../vendor/js/prism.js"></script>
</body>

</html>

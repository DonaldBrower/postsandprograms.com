---
tags: post
layout: post-layout.njk
title: Remove <p\> tags surrounding <img\> tags generated by parsing markdown with Showdown
date: 2021-07-22
description: I was using the Showdown package to parse some markdown for a static site generator, and every image would be wrapped up in a <p> tag. Here's some code to make those tags go away.
---

## {{ title }}

When Showdown makes image tags from your markdown, it wraps them in a paragraph tag.

To remove these non-essential p tags, which in my case made images a pain to style, define a new extension whereever your main converter is defined.

``` js
showdown.extension("remove-p-from-img", function () {
  return [
    {
      type: "output",
      filter: function (text) {
        text = text.replace(
          // match all <p>'s before and after an <img> tag
          /(<\/?p[^>]*>)(?=<img.+>)|(<\/?p[^>]*>)(?<=<img.+>)/g,
          ""
        );

        return text;
      },
    },
  ];
});

const converter = new showdown.Converter({
  extensions: ["remove-p-from-img"],
});
```

See the regular expression [explained more clearly at RegExr](https://regexr.com/62bhq)
